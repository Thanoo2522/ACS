from azure.communication.identity import CommunicationIdentityClient
import os
from dotenv import load_dotenv

load_dotenv()

ACS_CONNECTION_STRING = os.getenv("ACS_CONNECTION_STRING")
identity_client = CommunicationIdentityClient.from_connection_string(ACS_CONNECTION_STRING)

user = identity_client.create_user()
token_response = identity_client.get_token(user, scopes=["voip", "chat"])

print("User ID:", user.properties["id"])  # <-- แก้ตรงนี้
print("Token:", token_response.token)
print("Expires On:", token_response.expires_on)
